/* lists */
.dl-colonated {
  > dt {
    float: left;

    &:after {
      content: ': ';
      white-space: pre;
    }
  }
}

.list-army-list {
  list-style: none;
  margin-bottom: 0;
  padding-left: 0;

  > li:not(:first-child) {
    margin-top: (@line-height-computed / 2);
  }
}


.list-upper-roman {
  counter-reset: list-upper-roman;

  ol& {
    list-style-type: none;
    padding-left: 0;
  }

  > dt:before, > li:before {
    counter-increment: list-upper-roman;
    content: counter(list-upper-roman, upper-roman) ' â€“ ';
    font-weight: bold;
  }
}

/* tables */
.table-centered {
  margin-left: auto;
  margin-right: auto;
  width: auto;
}

/* panels */
.panel > .panel { margin: 15px 15px 0; }

.panel-body {
  > :first-child { margin-top: 0; }
  > :last-child { margin-bottom: 0; }
}

/* tp classes */
.faq > .panel-body > dl  > dt {
  &:before { content: 'Q: '; }

  + dd:before { content: 'A: '; }
}

.unit {
  .clearfix();

  .stats, .weapon-line {
    > * {
      display: table-cell;
      padding: 0 0.5em;
      text-align: center;

      &:before {
        display: block;
        font-weight: bold;
      }
    }
  }

  .stats {
    display: table;

    > * {
      &.name:before { content: 'Name'; }
      &.type:before { content: 'Type'; }
      &.speed:before { content: 'Speed'; }
      &.armour:before { content: 'Armour'; }
      &.cc:before { content: 'CC'; }
      &.ff:before { content: 'FF'; }
    }
  }

  .weapons { display: table; }
  .weapon:first-child > .weapon-line:first-child > * {
    &.name:before { content: 'Weapons'; }
    &.range:before { content: 'Range'; }
    &.firepower:before { content: 'Firepower'; }
  }

  .weapon, .weapon-line { display: table-row; }
  .name, .boolean, .firepower {
    text-align: left;
    width: 50%;
  }
  .boolean { text-align: right; }
  .cc, .ff { min-width: 3em; }
  .firepower {
    > :not(:last-child):after { content: ', '; }

    .special-rules >  li:last-child:after { content: none; }
  }
  .special-rules {
    padding: 0;

    &, > li { display: inline; }

    > li:after { content: ', '; }
    > li:last-child:after { content: '.'; }
  }

  .notes {
    clear: both;
    padding: 0 0.5em;

    > * { margin-bottom: 0; }
    > .special-rules {
      font-style: italic;

      + * { display: inline; }
    }
    > :first-child:before {
      content: 'Notes: ';
      font-style: normal;
      font-weight: bold;
    }
  }
}

/* tags */
title { string-set: title content(), date attr(data-date); }

main {
  counter-reset: fn;

  h1, h2, h3 { string-set: footnote content(); }

  .footnote {
    counter-increment: fn;
    cursor: pointer;

    &:after {
      content: counter(fn);
      font-size: 75%;
      line-height: 0;
      vertical-align: super;
    }
  }

  &:not(.no-outline) {
    counter-reset: fn h1;

    h1 {
      string-set: footnote counter(h1) '.0 ' content(), section counter(h1) '.0 ' content();

      &[id]:not(.no-count) {
        counter-increment: h1;
        counter-reset: h2 h3;

        &:before { content: counter(h1) '.0 '; }
        &.footnote { counter-increment: fn h1; }
      }
    }

    h2 {
      string-set: footnote counter(h1) '.' counter(h2) ' ' content();

      &[id]:not(.no-count) {
        counter-increment: h2;
        counter-reset: h3;

        &:before { content: counter(h1) '.' counter(h2) ' '; }
        &.footnote { counter-increment: fn h2; }
      }
    }
    .force, .army-list {
      counter-increment: h2;

      h2[id]:not(.no-count) { counter-increment: none; }
      &.footnote { counter-increment: fn h2; }
    }

    h3 {
      string-set: footnote counter(h1) '.' counter(h2) '.' counter(h3) ' ' content();

      &[id]:not(.no-count) {
        counter-increment: h3;

        &:before { content: counter(h1) '.' counter(h2) '.' counter(h3) ' '; }
        &.footnote { counter-increment: fn h3; }
      }
    }
  }
}

/* IDs */
#weapon-fire-arc-figures {
  max-width: 100%;
  width: (2 * 194px);

  figure {
    position: relative;
    float: left;
    width: 50%;
  }

  figcaption {
    padding: 0 0.5em;
    position: absolute;
    top: 0.25em;
    width: 100%;
  }
}