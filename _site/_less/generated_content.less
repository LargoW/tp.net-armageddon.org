main:not(.no-outline) {
  counter-reset: fn h1;

  h1[id]:not(.no-count) {
    counter-increment: h1;
    counter-reset: h2 h3;

    &:before { content: counter(h1) '.0 '; }
    &.footnote { counter-increment: fn h1; }
  }

  h2[id]:not(.no-count) {
    counter-increment: h2;
    counter-reset: h3;

    &:before { content: counter(h1) '.' counter(h2) ' '; }
    &.footnote { counter-increment: fn h2; }
  }
  .force, .army-list {
    counter-increment: h2;

    h2[id]:not(.no-count) { counter-increment: none; }
    &.footnote { counter-increment: fn h2; }
  }

  h3[id]:not(.no-count) {
    counter-increment: h3;

    &:before { content: counter(h1) '.' counter(h2) '.' counter(h3) ' '; }
    &.footnote { counter-increment: fn h3; }
  }

  .footnote {
    counter-increment: fn;
    cursor: pointer;

    &:after {
      content: counter(fn);
      font-size: 75%;
      line-height: 0;
      vertical-align: super;
    }
  }
}

title { string-set: title content(); }
h1 { string-set: footnote counter(h1) '.0 ' content(), section counter(h1) '.0 ' content(); }
h2 { string-set: footnote counter(h1) '.' counter(h2) ' ' content(); }
h3 { string-set: footnote counter(h1) '.' counter(h2) '.' counter(h3) ' ' content(); }
#date { string-set: date content(); }