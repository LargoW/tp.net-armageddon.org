/* strings */
title { string-set: title content(); }
h1 { string-set: section counter(h1) '.0 ' content(); }

/* bookmark labels */
main:not(.no-outline) {
  h1[id] { bookmark-label: counter(h1) '.0 ' content(); }
  h2[id] { bookmark-label: counter(h1) '.' counter(h2) ' ' content(); }
  h3[id] { bookmark-label: counter(h1) '.' counter(h2)  '.' counter(h3) ' ' content(); }

  h1, h2, h3, h4 {
    bookmark-label: none;

    &[id].no-count { bookmark-label: content(); }
  }
}

/* pages */
.page-break { page-break-before: always; }
.page-break-left { page-break-before: left; }
.page-break-right { page-break-before: right; }

@page {
  font: 10pt/1 Garamond, serif;
  margin: 1.75cm 1cm 1.25cm;
  size: 210mm 11in;

  .top() {
    padding: 0 0 0.5cm;
    vertical-align: bottom;
  }

  .bottom() {
    padding: 0.125cm 0 0;
    vertical-align: top;
  }

  @top-left { .top(); }
  @top-center {
    content: string(title) ' â€“ ' string(lastEdited);
    .top();
  }
  @top-right { .top(); }

  @bottom-left { .bottom(); }
  @bottom-right { .bottom(); }

  @footnotes {
    border-top: 1pt solid #999;
    margin: 5.5pt 0 0;
    padding: 5.5pt 0 0;
  }
}

@page:blank {
  @top-left { content: none; }
  @top-center { content: none; }
  @top-right { content: none; }

  @bottom-left { content: none; }
  @bottom-right { content: none; }
}

@page:left {
  margin: 1.75cm 1.4cm 1.25cm 1cm;

  @top-left { content: string(section); }

  @bottom-left { content: counter(page); }
}
@page:right {
  margin: 1.75cm 1cm 1.25cm 1.4cm;

  @top-right { content: string(section); }

  @bottom-right { content: counter(page); }
}

@page datasheet, reference-sheet {
  border: 1pt solid #999;
  margin: 1cm 0.75cm;
  padding: 6pt;
  size: 11in 210mm;

  @top-left { content: none; }
  @top-center { content: none; }
  @top-right { content: none; }

  @bottom-left { content: none; }
  @bottom-right { content: none; }
}
@page reference-sheet {
  margin: 0.75cm 1cm;
  size: 210mm 11in;
}

@page table-of-contents:left {
  @top-left { content: 'Table of Contents'; }

  @bottom-left { content: counter(page, lower-roman); }
}
@page table-of-contents:right {
  @top-right { content: 'Table of Contents'; }

  @bottom-right { content: counter(page, lower-roman); }
}

/* columns */
.two-column {
  column-count: 2;
  column-fill: auto;
  column-gap: 0.75cm;
  .page-break();
}

.column-break { column-break-before: always; }

/* sections */
#table-of-contents {
  .two-column();
  page: table-of-contents;

  a {
    display: block;

    &._h1 {
      content: target-counter(attr(href), h1) '.0 ' target-content(attr(href)) leader('.') target-counter(attr(href), page);
    }
    &._h2 {
      content: target-counter(attr(href), h1) '.' target-counter(attr(href), h2) ' ' target-content(attr(href)) leader('.') target-counter(attr(href), page);
      margin-left: 1em;
    }
    &._h3 {
      content: target-counter(attr(href), h1) '.' target-counter(attr(href), h2) '.' target-counter(attr(href), h3) ' ' target-content(attr(href)) leader('.') target-counter(attr(href), page);
      margin-left: 2em;
    }
    &.no-count {
      content: target-content(attr(href)) leader('.') target-counter(attr(href), page);
    }
  }
}


.force {
  .page-break-right();
  page: datasheet;
}

.army-list {
  .page-break-right();
}